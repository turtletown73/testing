<html>
  <body style="background-color:black;">
    <button id="button" style="width:100%;height:95%;font-size:10em;background-color:444444;color:BBBBBB;">Open!</button>
    <p style="width:100%;height:5%;bottom:2.5%;color:white;text-align:center;">It will show an error, the game should still be functional despite the error, just click ok.</p>
  </body>

  <script>
    document.getElementById("button").onclick = function() {
      var windowThing = window.open();
      var body = document.createElement("body");
      var iframe = document.createElement("iframe");
      var script = document.createElement("script");
      var scriptCode = `
        var konami = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];
        var hasExtras = false;
        var iframe = document.getElementById("frame");
        var current = 0;
        var win = iframe.contentWindow || iframe;
        var fullscreen = 0;

        document.onkeydown = function (e) {
          if (hasExtras == false) {
            if (e.keyCode == konami[current]) {
              current++;
              if (current == 10) {
                hasExtras = true;
                alert('"extras" enabled!');
              }
            }
            else {
              current = 0;
            }
          }
          else {
            if (e.keyCode == 220) {
              fullscreen = 1 - fullscreen;
              win.unityInstance.SetFullscreen(fullscreen);
            }
            if (e.keyCode == 221) {
              alert(win.unityInstance.SendMessage("Main Camera", "ToString"));
            }
          }
        }
      `;

      script.type = 'text/javascript';
      script.appendChild(document.createTextNode(scriptCode));
      
      iframe.style = "border: none; width: 100%; height: 100%; margin: 0px;";
      iframe.id = "frame";
      iframe.src = "code/index.html";
      iframe.appendChild(script);
      
      body.style = "margin: 0px; height: 100vh;";
      body.appendChild(iframe);
      
      windowThing.document.body = body;

      window.close();
    };
  </script>
</html>
